{% extends "base.html" %}
{% load currency %}
{% load i18n %}
{% block content %}

<section class="section section-cart-page">
	<div class="container">
		<h2>{% translate "Order" %} #{{ order.id }}</h2>

		<p class="mb-2">
			{% translate "Placed on" %} {{ order.created_at|date:"Y-m-d H:i" }} · {% translate "Status" %}:
			<strong class="text-uppercase">{{ order.status }}</strong>
		</p>

		<p class="mb-4">
			{% translate "Name" %}: {{ order.name }} · {% translate "Email" %}: {{ order.email }}
		</p>

		{% if messages %}
		{% for message in messages %}
		<div class="alert alert-{{ message.tags }}">{{ message }}</div>
		{% endfor %}
		{% endif %}

		{% if order.items.all %}
		<table class="table cart-table">
			<thead>
			<tr>
				<th>{% translate "Product" %}</th>
				<th>{% translate "Unit" %}</th>
				<th>{% translate "Qty" %}</th>
				<th>{% translate "Line" %}</th>
			</tr>
			</thead>

			<tbody>
			{% for item in order.items.all %}
			<tr>
				<td>
					<a href="{% url 'inventory:product' item.product.id %}" class="cart-product-link">
						<img src="{{ item.product.image.url }}" alt="" />
						{{ item.product.name }}
					</a>
				</td>
				<td>{{ item.unit_price_cents|cents_to_dollars }}</td>
				<td>{{ item.quantity }}</td>
				<td>{{ item.line_total_cents|cents_to_dollars }}</td>
			</tr>
			{% endfor %}
			</tbody>

			<tfoot>
			<tr>
				<td colspan="3"><strong>{% translate "Total" %}</strong></td>
				<td><strong>{{ order.total_cents|cents_to_dollars }}</strong></td>
			</tr>
			</tfoot>
		</table>

		{% else %}
		<p>{% translate "This order has no items." %}</p>
		{% endif %}

		<a href="{% url 'account:account' %}" class="btn btn--primary">
			{% translate "Back to Account" %}
		</a>
	</div>
</section>

{% endblock %}
